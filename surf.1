.TH SURF 1 surf\-VERSION
.SH NAME
surf \- simple webkit-based browser
.SH SYNOPSIS
.B surf
.RB [-bBdDfFgGiIkKmMnNpPsStTvwxXyY]
.RB [-a\ cookiepolicies]
.RB [-c\ cookiefile]
.RB [-C\ stylefile]
.RB [-e\ xid]
.RB [-r\ scriptfile]
.RB [-u\ useragent]
.RB [-z\ zoomlevel]
.RB [URI]
.SH DESCRIPTION
surf is a simple Web browser based on WebKit/GTK+. It is able
to display websites and follow links. It supports the XEmbed protocol
which makes it possible to embed it in another application. Furthermore,
one can point surf to another URI by setting its XProperties.
.SH OPTIONS
.TP
.B \-a cookiepolicies
Define the order of
.I cookie policies\fR.
The default is "@Aa" but could be
redefined in the
.IR config.h ,
with "A" meaning to
accept all cookies, "a" to deny all cookies and "@", which tells surf to
accept no third party cookies.
.TP
.B \-b
Disable Scrollbars.
.TP
.B \-B
Enable Scrollbars.
.TP
.B \-c cookiefile
Specify the
.I cookiefile
to use.
.TP
.B \-C stylefile
Specify the user
.IR stylefile .
This does disable the site-specific styles.
.TP
.B \-d
Disable the disk cache.
.TP
.B \-D
Enable the disk cache.
.TP
.B \-e xid
Reparents to window specified by
.IR xid .
.TP
.B \-f
Start surf in windowed mode (not fullscreen).
.TP
.B \-F
Start surf in fullscreen mode.
.TP
.B \-g
Disable giving the geolocation to websites.
.TP
.B \-G
Enable giving the geolocation to websites.
.TP
.B \-i
Disable Images.
.TP
.B \-I
Enable Images.
.TP
.B \-k
Disable kiosk mode (disable key strokes and right click).
.TP
.B \-K
Enable kiosk mode (disable key strokes and right click).
.TP
.B \-m
Disable application of user style sheets.
.TP
.B \-M
Enable application of user style sheets.
.TP
.B \-n
Disable the Web Inspector (Developer Tools).
.TP
.B \-N
Enable the Web Inspector (Developer Tools).
.TP
.B \-r scriptfile
Specify the user
.IR scriptfile .
.TP
.B \-s
Disable Javascript.
.TP
.B \-S
Enable Javascript.
.TP
.B \-t
Disable strict TLS check.
.TP
.B \-T
Enable strict TLS check.
.TP
.B \-u useragent
Specify the
.I useragent
which surf should use.
.TP
.B \-v
Prints version information to standard output, then exits.
.TP
.B \-w
Prints xid to standard output. This can be used to script the browser in for
example
.BR xdotool(1) .
.TP
.B -x
Disable custom certificates.
.TP
.B -X
Enable custom certificates.
.TP
.B -y
Disable content blocker.
.TP
.B -Y
Enable content blocker.
.TP
.B \-z zoomlevel
Specify the
.I zoomlevel
which surf should use.
.SH USAGE
.B Escape
Stops loading current page or stops download.
.TP
.B Ctrl\-h
Walks back the history.
.TP
.B Ctrl\-l
Walks forward the history.
.TP
.B Ctrl\-k
Scrolls page upwards.
.TP
.B Ctrl\-j
Scrolls page downwards.
.TP
.B Ctrl\-b
Scroll up one whole page view.
.TP
.B Ctrl\-Space
Scroll down one whole page view.
.TP
.B Ctrl\-i
Scroll horizontally to the right.
.TP
.B Ctrl\-u
Scroll horizontally to the left.
.TP
.B Ctrl\-Shift\-k or Ctrl\-+
Zooms page in.
.TP
.B Ctrl\-Shift\-j or Ctrl\--
Zooms page out.
.TP
.B Ctrl\-Shift\-q
Resets Zoom.
.TP
.B Ctrl\-f and Ctrl\-/
Opens the search-bar.
.TP
.B Ctrl\-n
Go to next search result.
.TP
.B Ctrl\-Shift\-n
Go to previous search result.
.TP
.B Ctrl\-g
Opens the URL-bar (requires dmenu installed).
.TP
.B Ctrl\-p
Loads URI from primary selection.
.TP
.B Ctrl\-Shift\-p
Calls Printpage Dialog.
.TP
.B Ctrl\-r
Reloads the website.
.TP
.B Ctrl\-Shift\-r
Reloads the website without using the cache.
.TP
.B Ctrl\-y
Copies current URI to primary selection.
.TP
.B Ctrl\-t
Display the current TLS certificate in a popup window.
.TP
.B Ctrl\-Shift\-a
Toggle through the the
.I cookie policies\fR.
This will not reload the page.
.TP
.B Ctrl\-Shift\-b
Toggle scrollbars. This will reload the page.
.TP
.B Ctrl\-Shift\-c
Toggle caret browsing. This will reload the page.
.TP
.B Ctrl\-Shift\-i
Toggle auto-loading of images. This will reload the page.
.TP
.B Ctrl\-Shift\-m
Toggle if the
.I stylefile
file should be loaded. This will reload the page.
.TP
.B Ctrl\-Shift\-o
Open the Web Inspector (Developer Tools) window for the current page.
.TP
.B Ctrl\-Shift\-s
Toggle script execution. This will reload the page.
.TP
.B Ctrl\-Shift\-t
Toggle strict TLS check. This will reload the page.
.TP
.B Ctrl\-Shift\-y
Enter content blocker mode. See
.I content blocking\fR, below.
.TP
.B F11
Toggle fullscreen mode.
.SH INDICATORS OF OPERATION
Surf is showing indicators of operation in front of the site title.
For all indicators, unless otherwise specified, a lower case letter means disabled and an upper case letter means enabled.
.TP
.B A
all cookies accepted
.TP
.B a
no cookies accepted
.TP
.B @
all except third-party cookies accepted
.TP
.B c C
caret browsing
.TP
.B g G
geolocation
.TP
.B d D
disk cache
.TP
.B i I
images
.TP
.B s S
scripts
.TP
.B m M
styles
.TP
.B f F
frame flattening
.TP
.B x X
custom certificates
.TP
.B t T
strict TLS
.SH INDICATORS OF WEB PAGE
The second part of the indicators specifies modes of the web page itself.
.SS First character: encryption
.TP
.B -
unencrypted
.TP
.B T
encrypted (TLS)
.TP
.B U
attempted encryption but failed
.SS Second character: proxying
.TP
.B -
no proxy
.TP
.B P
using proxy
.SH CONTENT BLOCKING
Content blocking rules cycle through three states: inheriting other rules, blocking requests, and allowing requests that might otherwise be blocked. In its default state, all rules are inherited, so the first press of a given type will block it.
.TP
Rules may be edited by first- or third-party connections. That is, requests that match the same domain URI as the one navigated to in the browser are first party, and requests to other addresses are third party. In its default state, all rules are changed in both first- and third-party rules. Pressing `1' will allow further presses to modify first-party rules exclusively. Pressing `3' then includes third-party rules; pressing `3' again excludes first-party rules. When excluded, the party will disappear from the status indicators but will still be applied as content blockers.
.TP
Modifications will not persist automatically. To save rules. use `w' to write them to disk. This will overwrite the existing configuration file and will include all modifications made during the current browser's session, not just the rules for the current page.
.SS Caution
The content blocker will make webpages behave unexpectedly. Blocking first-party documents will prevent the webpage from loading, which in turn prevents the browser from editing its rules, requiring manual editing of the configuration file. This is not intended as a set\-and\-forget ad blocker but as a tool for taking ownership of how websites use your computer.
.TP
While the WebKit content blocker only filters requests and not inline content, the \fBsurf\fR blocker strips specified tags for blocked content. This behavior is not inherited, however. To block inline content, set the rule explicitly for each domain.
.SS Usage
.TP
.B Ctrl\-Shift\-y
enter content blocking mode from the default keymap
.TP
In the content blocking mode, the following keys are available:
.TP
.B a\fR, \fBReturn
apply the current rules
.TP
.B c
cycle rule for CSS
.TP
.B d
cycle rule for documents
.TP
.B f
cycle rule for fonts
.TP
.B i
cycle rule for images
.TP
.B m
cycle rule for media
.TP
.B p
cycle rule for popups
.TP
.B q\fR, \fBEscape
reset rule to defaults
.TP
.B r
cycle rule for raw (unspecified) requests
.TP
.B s
cycle rule for scripts
.TP
.B t
toggle content blocking
.TP
.B v
cycle rule for SVG documents
.TP
.B w
write all rules to disk
.TP
.B 1
configure first-party request blocking, or, if already configuring first-party options, exclude third-party configuration
.TP
.B 2
toggle visibility of the URI navigated to in browser; does not modify the behavior of other keys
.TP
.B 3
configure third-party request blocking, or, if already configuring third-party options, exclude first-party configuration
.TP
Any other key returns to the default keymap.
.SS Indicators
The content blocker status is provided in four sections: the request URI, if any; the URI navigated to in the browser, or '*' if not limited in this way; and two blocks of status indicators, the first preceded by '1' providing the status of first-party content blocking and the second preceded by '3' providing the status of third-party content blocking.
.TP
The same characters are used as described in \fIUsage\fP, above. A capital letter (one of `DCFIVMSRP') indicates that this connection type is explicitly allowed. A lowercase letter (one of `dcfivmsrp') indicates that this connection type is explicitly denied. Any absent character indicates that this connection type is inherited from previous rules, if any.
.SS Configuration File
The content blocker, located by default at \fI~/.surf/filter.rules\fR, can be configured in exactly the same manner as its status indicator is displayed.
.TP
The file may have up to one rule per line. Contiguous whitespace is ignored, but whitespace delimits fields. The available fields are:
.TP
.B request-uri \fR(optional)
also known in WebKit as `if-url'. This applies to each prospective request that the browser may load for each page. Note that rules with this field are not visible in \fBsurf\fR but are still used to block content. Rudimentary regular expressions are allowed, except those including whitespace (although '%20' is not seen as whitespace).
.TP
.B browser-uri \fR(required)
also known in WebKit as `if-top-url'. This applies to the URI that would be seen in the navigation bar. \fBsurf\fR's interactive editor will only recognize this field if it is a plain-text domain name. However, regular expressions will still be read and passed to WebKit.
.TP
.B first-party \fR(required)
a list of characters in [dcfivmsrpDCFIVMSRP]. As before, lowercase letters block connections, uppercase letters allow them, and absent characters inherit other rules.
.TP
.B third-party \fR(required)
same as \fIfirst-party\fP, above.
.TP
Later rules take precedence over earlier rules.
.TP
Lines beginning with a '#', optionally preceded by spaces and/or tabs, and lines with less than three or more than four fields, including blank lines, are ignored and may be used for comments.
.TP
For example,
.TP
.B * 1cfivmsrp 3cfivmsrp
will block all requests other than for documents, on all webpages.
.TP
.B suckless.org 1Is 3
where the 'I' will let you see the sophisticated imagery on suckless.org, but the lack of an 'I' after '3' means that images from third parties will be blocked due to the previous rule. The 's' will strip inline, script-like content from the main HTML document. Note that the `3' is mandatory even if all rules are to be inherited.
.TP
.B puppy * 1IMSR 3IMSR
will display images and media, which usually require scripts which in turn often use raw-type requests, for requests from any website that includes `puppy' in the request URI; neither the request-uri nor browser-uri fields are limited to domain names. Note, however, that the \fBsurf\fR interface only sets domain names for the browser-uri and will not present other rules for editing.
.TP
.B http://[^/]*suckless\\\\\\\\.org/ * 1dcfivmsrp 3dcfivmsrp
will block all types of HTTP connections to a URI in a domain that matches 'suckless.org'. In effect, this requires all connections to such servers to be over HTTPS. Note that this is only a request made to the WebKit engine; it does not guarantee that no such connections will be made.
.TP
The \fBsurf\fP content blocker uses the WebKit tool of the same name. See WebKit documentation for more details on what is possible.
.SH ENVIRONMENT
.B SURF_USERAGENT
If this variable is set upon startup, surf will use it as the
.I useragent
string.
.TP
.B http_proxy
If this variable is set and not empty upon startup, surf will use it as the http proxy.
.SH SIGNALS
Surf will reload the current page on
.BR SIGHUP .
.SH SEE ALSO
.BR dmenu(1),
.BR xprop(1),
.BR tabbed(1),
.BR xdotool(1)
.SH BUGS
Please report them!
